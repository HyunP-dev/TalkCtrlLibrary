<UserControl x:Class="TalkCtrlLibrary.MessageItem"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:TalkCtrlLibrary"
             mc:Ignorable="d" 
             d:DesignWidth="600"
             Padding="0 5 0 5">
    <Grid x:Name="RootGrid" >
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="45"/>
            <ColumnDefinition />
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0" Width="40" Margin="0 0 0 0" VerticalAlignment="Top" Background="Transparent" >
            <Border Width="40" Height="40" CornerRadius="10">
                <Border.Background>
                    <ImageBrush Stretch="UniformToFill" ImageSource="https://cdn2.ppomppu.co.kr/zboard/data3/2022/0509/20220509173224_d9N4ZGtBVR.jpeg"/>
                </Border.Background>
            </Border>
        </Border>
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="26"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Label Content="" Name="NicknameView" Margin="8 0 0 0"/>
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="auto"/>
                    <ColumnDefinition Width="auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Panel.ZIndex="2" Name="MsgContentView" Margin="8 -2 0 0" Padding="7 5"
                       Width="Auto"
                       MaxWidth="400"
                       TextWrapping="Wrap" LineStackingStrategy="BlockLineHeight" LineHeight="20"
                       VerticalAlignment="Top"
                       Text="" />
                <Rectangle Panel.ZIndex="1" Fill="White" Margin="{Binding Margin,ElementName=MsgContentView}" 
                       RadiusX="2" RadiusY="2"
                       Width="{Binding Width,ElementName=MsgContentView}" 
                       Height="{Binding ActualHeight,ElementName=MsgContentView}" 
                       Stroke="White" 
                       StrokeThickness="3"
                       VerticalAlignment="Top"/>
                <Canvas Height="8" Width="8" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0 6 0 0">
                    <Polygon Points="0,0 8,8 8,0" Fill="White" />
                </Canvas>

                <Grid Grid.Column="1">
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Label x:Name="TimeView" Grid.Row="1" Content="" Padding="5 0 5 0"/>
                </Grid>
            </Grid>
        </Grid>
    </Grid>
</UserControl>
